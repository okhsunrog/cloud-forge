[Interface]
PrivateKey = {{ wireguard_private_key.content | b64decode }}
ListenPort = {{ wireguard_port }}
Address = {{ wireguard_address | regex_replace('/.*', '/32') }}

{% for peer in wireguard_peers %}
[Peer]
PublicKey = {{ peer.public_key }}
AllowedIPs = {{ peer.ip }}/32
{% endfor %}
